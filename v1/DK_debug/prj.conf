# =================================================================
# ==     RTT-based prj.conf for Border Router (RELIABLE)       ==
# =================================================================

# --- Base Features ---
CONFIG_GPIO=y
CONFIG_NETWORKING=y
CONFIG_NET_L2_OPENTHREAD=y
CONFIG_NET_UDP=y
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3
CONFIG_SETTINGS=y
CONFIG_SETTINGS_NVS=y

# --- Shell Configuration (via RTT) ---
CONFIG_SHELL=y
CONFIG_OPENTHREAD_SHELL=y
CONFIG_SHELL_ARGC_MAX=26
CONFIG_SHELL_CMD_BUFF_SIZE=416

# --- OpenThread Stack ---
CONFIG_OPENTHREAD_NORDIC_LIBRARY_MASTER=y
CONFIG_OPENTHREAD_THREAD_VERSION_1_2=y
CONFIG_OPENTHREAD_FTD=y
CONFIG_OPENTHREAD_MTD=n
CONFIG_OPENTHREAD_BORDER_ROUTER=y

# --- RTT Configuration (Reliable Console) ---
CONFIG_USE_SEGGER_RTT=y
CONFIG_RTT_CONSOLE=y
CONFIG_UART_CONSOLE=n
CONFIG_LOG_BACKEND_RTT=y
CONFIG_SHELL_BACKEND_RTT=y

CONFIG_SHELL_BACKEND_RTT_BUFFER=0
CONFIG_LOG_BACKEND_RTT_BUFFER=1

# --- Disable USB (causes issues) ---
CONFIG_USB_DEVICE_STACK=n

# --- Stack Sizes ---
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=4096
CONFIG_SHELL_STACK_SIZE=4096
CONFIG_IDLE_STACK_SIZE=1024

# --- Debug and Stability ---
CONFIG_ASSERT=y
CONFIG_NRF_APPROTECT_LOCK=n

# --- Thread Safety ---
CONFIG_THREAD_RUNTIME_STATS=y